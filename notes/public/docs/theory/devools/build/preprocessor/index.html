<!DOCTYPE html>
<html lang="ru-ru" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  Препроцессор
  #

Препроцессор - это текстовый процессор (программа для обработки текста).
Ну и он может делать только простые текстовые операции - подставить один кусок текста вместо вдругого или удалить кусок текста.

  Что с его помощью можно делать
  #

В C (да и в C&#43;&#43;) команды препроцессора начинаются с символа #. Некоторые из них:
#include &lt;stdio.h&gt;
#include &#34;foo.h&#34;

#line 42 &#34;somefile.h&#34;

#define PI 3.1415926
#define MAX(a, b) (((a) &gt;= (b)) ? (a) : (b))

#define FOO_H

#if 2 == 3
#endif

#ifdef FOO_H
# endif

#ifndef FOO_H
#elif BAR_H
#else
#endif
Каждая из этих команд только обрабатывает текст">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://example.org/docs/theory/devools/build/preprocessor/">
  <meta property="og:site_name" content="caos theory">
  <meta property="og:title" content="Препроцессор">
  <meta property="og:description" content=" Препроцессор # Препроцессор - это текстовый процессор (программа для обработки текста). Ну и он может делать только простые текстовые операции - подставить один кусок текста вместо вдругого или удалить кусок текста.
Что с его помощью можно делать # В C (да и в C&#43;&#43;) команды препроцессора начинаются с символа #. Некоторые из них:
#include &lt;stdio.h&gt; #include &#34;foo.h&#34; #line 42 &#34;somefile.h&#34; #define PI 3.1415926 #define MAX(a, b) (((a) &gt;= (b)) ? (a) : (b)) #define FOO_H #if 2 == 3 #endif #ifdef FOO_H # endif #ifndef FOO_H #elif BAR_H #else #endif Каждая из этих команд только обрабатывает текст">
  <meta property="og:locale" content="ru_ru">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
<title>Препроцессор | caos theory</title>
<link rel="icon" href="/favicon.png" >
<link rel="manifest" href="/manifest.json">
<link rel="canonical" href="https://example.org/docs/theory/devools/build/preprocessor/">
<link rel="stylesheet" href="/book.min.3b63b9ecb24b01f1be0df5c6f361b3a2004ab96665227385e0196f67e7607b29.css" integrity="sha256-O2O57LJLAfG&#43;DfXG82GzogBKuWZlInOF4BlvZ&#43;dgeyk=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.f8076a06f272a4c3af0458bc7e3893702ee170b64688e2ee302af8a0a0fbb639.js" integrity="sha256-&#43;AdqBvJypMOvBFi8fjiTcC7hcLZGiOLuMCr4oKD7tjk=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>caos theory</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>















  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <a href="/docs/theory/" class="">Как закрыть курс</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/theory/whoami/" class="">whoami</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/theory/necronomicon/" class="">Некрономикон</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/theory/devtools/" class="">legacy (devtools)</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-96321df072730b9a64870c0191c9133b" class="toggle" checked />
    <label for="section-96321df072730b9a64870c0191c9133b" class="flex justify-between">
      <a href="/docs/theory/devools/" class="">Инструменты разработки</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/theory/devools/bash/" class="">bash</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-00ddca2e91ce1413d9900b188295d522" class="toggle" checked />
    <label for="section-00ddca2e91ce1413d9900b188295d522" class="flex justify-between">
      <a href="/docs/theory/devools/build/" class="">Этапы сборки</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/theory/devools/build/preprocessor/" class="active">Препроцессор</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>Shortcodes</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/shortcodes/buttons/" class="">Buttons</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/shortcodes/columns/" class="">Columns</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/shortcodes/details/" class="">Details</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/shortcodes/hints/" class="">Hints</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/shortcodes/mermaid/" class="">Mermaid</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d4c83c0dd655503a3da63d0c6550ed41" class="toggle"  />
    <label for="section-d4c83c0dd655503a3da63d0c6550ed41" class="flex justify-between">
      <a href="/docs/shortcodes/section/" class="">Section</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/shortcodes/section/first-page/" class="">First Page</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/shortcodes/section/second-page/" class="">Second Page</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/shortcodes/tabs/" class="">Tabs</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/shortcodes/katex/" class="">KaTeX</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>










  
<ul>
  
  <li>
    <a href="/posts/"  >
        Blog
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Препроцессор</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#что-с-его-помощью-можно-делать">Что с его помощью можно делать</a></li>
    <li><a href="#мотивация">Мотивация</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="препроцессор">
  Препроцессор
  <a class="anchor" href="#%d0%bf%d1%80%d0%b5%d0%bf%d1%80%d0%be%d1%86%d0%b5%d1%81%d1%81%d0%be%d1%80">#</a>
</h1>
<p>Препроцессор - это текстовый процессор (программа для обработки текста).
Ну и он может делать только простые текстовые операции - подставить один кусок текста вместо вдругого или удалить кусок текста.</p>
<h2 id="что-с-его-помощью-можно-делать">
  Что с его помощью можно делать
  <a class="anchor" href="#%d1%87%d1%82%d0%be-%d1%81-%d0%b5%d0%b3%d0%be-%d0%bf%d0%be%d0%bc%d0%be%d1%89%d1%8c%d1%8e-%d0%bc%d0%be%d0%b6%d0%bd%d0%be-%d0%b4%d0%b5%d0%bb%d0%b0%d1%82%d1%8c">#</a>
</h2>
<p>В C (да и в C++) команды препроцессора начинаются с символа <code>#</code>. Некоторые из них:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;foo.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#line 42 &#34;somefile.h&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define PI 3.1415926
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#define MAX(a, b) (((a) &gt;= (b)) ? (a) : (b))
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#define FOO_H
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#if 2 == 3
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#endif
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#ifdef FOO_H
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"># endif
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#ifndef FOO_H
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#elif BAR_H
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#else
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#endif
</span></span></span></code></pre></div><p>Каждая из этих команд <strong>только</strong> обрабатывает текст</p>
<ul>
<li><code>#include</code> - подставляет вместо себя содержимое файла
<ul>
<li>если скобки <code>&lt;треугольные&gt;</code>, то поиск файла происходит в стандартных путях (всем у кого видна - соболезную); например в <code>/usr/include.h</code>; дополнительные пути можно передать, вызвав <code>gcc</code> с флагом <code>-I</code></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gcc main.c -I/path/to/include/dir/ ...
</span></span></code></pre></div><ul>
<li>если используются <code>&quot;кавычки&quot;</code>, то поиск файла <strong>в начале</strong> идет в директории, где лежит файл, <strong>а потом</strong> в стандартных путях</li>
</ul>
</li>
<li><code>#line</code> похож на <code>#include</code>, но он подставляет не весь файл, а конкретную строку</li>
<li><code>#define</code> - определяет макросы; так можно задавать константы и правила подстановки
<ul>
<li>вместо <code>PI</code> (пример выше) во время сборки будет подставлено значение <code>3.1415926</code></li>
<li>правило <code>MAX(a, b)</code> будет раскрыто напрямую, <a href="/docs/theory/necronomicon/#%d0%bc%d0%b0%d0%ba%d1%80%d0%be%d1%81%d1%8b">а это плохо</a></li>
<li>ещё <code>#define</code> может объявлять пустые константы; например <code>#define FOO_H</code> объявит пустую
константу <code>FOO_H</code> (пример, зачем такое нужно - ниже)</li>
</ul>
</li>
<li><code>#if...</code> - с их помощью можно выкидывать куски кода из файла; например <code>#if __linux__</code> будет верно, только при сборке на linux-дистрибутивах</li>
</ul>
<blockquote class="book-hint info">
<p><strong>а откуда берутся эти константы?</strong></p>
<p>Такие константы идут предопределенными вместе с компилятором
(в месте с компилятором идет стандартная библиотека и т.д.)</p>
</blockquote>
<ul>
<li><code>#ifdef ABC</code> - проверяет, определена ли константа <code>ABC</code> (<code>#ifndef</code> - проверяет, если константа НЕ определена)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#ifdef ABC
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// этот код подставляется если ABC определена
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">#else
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#75715e">// этот код подставляется если ABC НЕ определена
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#75715e">#endif  </span><span style="color:#75715e">// ABC
</span></span></span></code></pre></div><details ><summary>main.c</summary>
  <div class="markdown-inner">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdio.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">greet</span>(<span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>name) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;Hello, %s</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, name);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span> <span style="color:#f92672">**</span>argv) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">/* argc - кол-во аргументов, переданых программе при запуске
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * argv - массив строк из этих аргументов
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * Хотим чего-то вида
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * ```
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * $ ./a.out CAOS
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * Hello, CAOS
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * ```
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     *
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * Тогда должно быть ДВА аргумента (argc == 2)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * argv[0] - имя программы
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     * argv[1] - имя, которое надо поприветствовать
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">     */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (argc <span style="color:#f92672">!=</span> <span style="color:#ae81ff">2</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// при неправильном кол-ве аргументов
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">// подсказываем, как правильно пользоваться
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#a6e22e">printf</span>(<span style="color:#e6db74">&#34;Usage:</span><span style="color:#ae81ff">\n\t</span><span style="color:#e6db74">%s name</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, argv[<span style="color:#ae81ff">0</span>]);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">greet</span>(argv[<span style="color:#ae81ff">1</span>]);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>  </div>
</details>
<p>Можно запустить только препроцессор, вызвав <code>gcc</code> с флагом <code>-E</code>
(файлик получится большой, поэтому посмотрим только на последние 20 строчек)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ gcc -E main.c -o main.i
</span></span><span style="display:flex;"><span>$ tail -20 main.i
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 2 &#34;main.c&#34; 2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3 &#34;main.c&#34;</span>
</span></span><span style="display:flex;"><span>void greet<span style="color:#f92672">(</span>char *name<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    printf<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Hello, %s\n&#34;</span>, name<span style="color:#f92672">)</span>;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>int main<span style="color:#f92672">(</span>int argc, char **argv<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 22 &#34;main.c&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>argc !<span style="color:#f92672">=</span> 2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        printf<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Usage:\n\t%s name\n&#34;</span>, argv<span style="color:#f92672">[</span>0<span style="color:#f92672">])</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> 1;
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    greet<span style="color:#f92672">(</span>argv<span style="color:#f92672">[</span>1<span style="color:#f92672">])</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> 0;
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>Там сохранился код на C, и рекурсивно подставилось содержимое инклудов (<code>stdio.h</code>).
Код на C - это наша программа, а странные строки вида <code># 22 &quot;main.c&quot;</code> - отладочная инфа.
Когда вы ловите ошибку компиляции - благодаря этим комментариям компилятор показывает вам,
где и менно и что именно упало.</p>
<p>С точки зрения самого языка C, строки, начинающиеся с <code># </code> - это комментарии</p>
<h2 id="мотивация">
  Мотивация
  <a class="anchor" href="#%d0%bc%d0%be%d1%82%d0%b8%d0%b2%d0%b0%d1%86%d0%b8%d1%8f">#</a>
</h2>
<p>А зачем вообще я могу хотеть удалять куски кода? Я же их так старательно&hellip;</p>
<p>Ну вот пример - есть библиотека <code>small_math.h</code> - в ней вы сами написали свои мат. функции специально
для работы с малыми величинами.</p>
<details ><summary>small_math.h</summary>
  <div class="markdown-inner">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// вычисляет произвудную синуса в точке x
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// при малых значениях x
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">double</span> <span style="color:#a6e22e">small_sin_deriv</span>(<span style="color:#66d9ef">double</span> x) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1.0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>  </div>
</details>
<p>и вы этот файлик используете в нескольких своих модулях - <code>elliptic_curves.h</code> и <code>my_hash.h</code></p>
<details ><summary>elliptic_curves.h</summary>
  <div class="markdown-inner">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;small_math.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ну и тут что-нибудь важное
</span></span></span></code></pre></div>  </div>
</details>
<details ><summary>my_hash.h</summary>
  <div class="markdown-inner">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;small_math.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// ну и тут что-нибудь необходимое
</span></span></span></code></pre></div>  </div>
</details>
<p>А потом оба этих файлика вы используете в <code>main.c</code></p>
<details ><summary>main.c</summary>
  <div class="markdown-inner">
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;elliptic_curves.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;my_hash.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ... //
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div>  </div>
</details>
<p>Попробуем собрать и получим&hellip;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ gcc main.c
</span></span><span style="display:flex;"><span>In file included from my_hash.h:1,
</span></span><span style="display:flex;"><span>                 from main.c:2:
</span></span><span style="display:flex;"><span>small_math.h:3:8: error: redefinition of ‘small_sin_deriv’
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">3</span> | double small_sin_deriv<span style="color:#f92672">(</span>double x<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      |        ^~~~~~~~~~~~~~~
</span></span><span style="display:flex;"><span>In file included from elliptic_curves.h:1,
</span></span><span style="display:flex;"><span>                 from main.c:1:
</span></span><span style="display:flex;"><span>small_math.h:3:8: note: previous definition of ‘small_sin_deriv’ with type ‘double<span style="color:#f92672">(</span>double<span style="color:#f92672">)</span>’
</span></span><span style="display:flex;"><span>    <span style="color:#ae81ff">3</span> | double small_sin_deriv<span style="color:#f92672">(</span>double x<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>      |        ^~~~~~~~~~~~~~~
</span></span></code></pre></div><p>ошибку <code>redefinition of ‘small_sin_deriv’</code>.</p>
<p>ЧТо зА фиГня?! - спросите вы</p>
<p>Перечитайте, как работает <code>#include</code> - отвечу вам я.</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#что-с-его-помощью-можно-делать">Что с его помощью можно делать</a></li>
    <li><a href="#мотивация">Мотивация</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












